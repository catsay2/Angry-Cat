-- NoClip Script with ON/OFF Toggle Support
-- Author: AngryCat | getgenv().NoClipEnabled toggle support

-- Khởi tạo nếu chưa có
getgenv().NoClipEnabled = getgenv().NoClipEnabled or false

local Players = game:GetService("Players")
local RunService = game:GetService("RunService")
local player = Players.LocalPlayer

-- Dọn kết nối cũ nếu có
if getgenv().NoClipConnection then
    getgenv().NoClipConnection:Disconnect()
    getgenv().NoClipConnection = nil
end

-- Thiết lập kết nối mới
getgenv().NoClipConnection = RunService.Stepped:Connect(function()
    if getgenv().NoClipEnabled and player.Character then
        for _, part in ipairs(player.Character:GetDescendants()) do
            if part:IsA("BasePart") and part.CanCollide == true then
                part.CanCollide = false
            end
        end
    end
end)

-- Tùy chọn: Thông báo trạng thái trong Output
print("NoClip script loaded. Current status: " .. (getgenv().NoClipEnabled and "ON" or "OFF"))
